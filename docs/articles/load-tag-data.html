<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tagtools">
<title>Load tag data • tagtools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load tag data">
<meta property="og:description" content="tagtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tagtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/acceleration-filtering.html">Complementary filtering for acceleration: low- &amp; high-frequency</a>
    <a class="dropdown-item" href="../articles/data-quality-error-correction.html">Data quality &amp; error correction</a>
    <a class="dropdown-item" href="../articles/Detectors.html">Detectors</a>
    <a class="dropdown-item" href="../articles/dive-stats.html">Using dive_stats</a>
    <a class="dropdown-item" href="../articles/find-dives.html">Using find_dives</a>
    <a class="dropdown-item" href="../articles/fine-scale-tracking.html">Fine-scale tracking</a>
    <a class="dropdown-item" href="../articles/install-load-tagtools.html">Installing and loading tagtools</a>
    <a class="dropdown-item" href="../articles/jerk-transients.html">Jerk: a way to emphasize rapid changes in acceleration</a>
    <a class="dropdown-item" href="../articles/load-tag-data.html">Load tag data</a>
    <a class="dropdown-item" href="../articles/magnetometer-filtering.html">More complementary filtering: magnetometer &amp; dynamic acceleration</a>
    <a class="dropdown-item" href="../articles/mahalanobis-distance.html">Mahalanobis distance</a>
    <a class="dropdown-item" href="../articles/plots-and-cropping.html">Plots and cropping</a>
    <a class="dropdown-item" href="../articles/rotation-test.html">Rotation test</a>
    <a class="dropdown-item" href="../articles/tag-to-whale-frame.html">Tag orientation: From tag frame to sperm whale frame</a>
    <a class="dropdown-item" href="../articles/TagTools.html">Tagtools vignettes: overview and introduction</a>
    <a class="dropdown-item" href="../articles/vectors-vs-structures.html">Vectors and scalars versus structures</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/animaltags/tagtools_r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Load tag data</h1>
                        <h4 data-toc-skip class="author">tagtools
project team</h4>
            
            <h4 data-toc-skip class="date">2023-07-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/animaltags/tagtools_r/blob/HEAD/vignettes/articles/load-tag-data.Rmd" class="external-link"><code>vignettes/articles/load-tag-data.Rmd</code></a></small>
      <div class="d-none name"><code>load-tag-data.Rmd</code></div>
    </div>

    
    
<p>Welcome to the load tag data vignette! On behalf of the team behind
tagtools, thanks for taking some time to get to know our package. We
hope it facilitates your work.</p>
<p>In this vignette, you will gain confidence with using the tagtools to
create and load netCDF files, including editing metadata (important data
about the data).</p>
<p><em>Estimated time for this vignette: about 20 minutes.</em></p>
<p>These vignettes assume that you have some basic experience working
with R/Rstudio, and can execute provided code, making some user-specific
changes along the way (e.g. to help R find a file you downloaded). We
will provide you with quite a few lines. To boost your own learning, you
would do well to try and write them before opening what we give, using
this just to check your work. Additionally, be careful when copy-pasting
special characters such as _underscores_, and ‘quotes’. If you get an
error, one thing to check is that you have just single, simple
underscores, and ‘straight quotes’, whether ‘single’ or “double” (rather
than “smart quotes”).</p>
<div class="section level2">
<h2 id="loading-an--nc-file">Loading an .nc File<a class="anchor" aria-label="anchor" href="#loading-an--nc-file"></a>
</h2>
<div class="section level3">
<h3 id="load-the-test-data-set">Load the test data set<a class="anchor" aria-label="anchor" href="#load-the-test-data-set"></a>
</h3>
<p>For this example, you will load in the data file from a CATs tag. The
data file is already stored in a .nc file called ‘cats_test_raw.nc’. If
you want to run this example, download the “cats_test_raw.nc” file from
<a href="https://github.com/animaltags/tagtools_data" class="external-link uri">https://github.com/animaltags/tagtools_data</a> and change
the file path to match where you’ve saved the files. Click Code at the
right to see how.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">tagtools</span><span class="op">)</span> <span class="co"># always start with this</span></span>
<span><span class="va">cats_file_path</span> <span class="op">&lt;-</span> <span class="st">"nc_files/cats_test_raw.nc"</span></span>
<span><span class="va">MN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_nc.html">load_nc</a></span><span class="op">(</span><span class="va">cats_file_path</span><span class="op">)</span></span></code></pre></div>
<p>This especially concise two-line method should always work with the
installation of <code>tagtools</code> that we support, for all eight
built-in datasets that come with the package. We will make frequent use
of this method in these vignettes. It is especially nice because it
saves you some hassle (of tracking down where the dataset is saved and
setting your working directory there, or of figuring out what your
working directory is and moving your dataset there).</p>
<p><strong>However</strong>, it is worth your while to understand how to
do these steps manually, though this requires its own separate mental
task, because you will have to do this in the real world when you get
your own data from somewhere else. You should keep track of what your
working directory is for other reasons, too. So, familiarize yourself
with the following commands:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># prints your current working directory. Often this will not be a tidy folder, but contain other things. So, to avoid that... </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Path/To/Tidy/Working/Directory/In/Quotes"</span>) <span class="co"># on Mac or Linux, paths look like this, with forward slashes between folders. For instance:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library/tagtools/extdata/"</span>) <span class="co"># depending on your system, this may set your working directory to the folder containing the built-in datasets</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:\Users\Sam Fynewever\Program Files"</span>) <span class="co"># on Windows, paths look like this, with a letter and colon at the beginning, then backslashes between folders</span></span></code></pre></div>
<p>Additionally, your working directory should be visible at the top of
the console:</p>
<p><img src="working_dir.png" width="948"></p>
<p>Now, if you have navigated to your working directory in your file
finder and/or ensured that the dataset file,
<code>cats_test_raw.nc</code>, is located there (whether by changing
your working directory or copy-pasting the file into your working
directory), you can run load_nc “by hand”—see code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_nc.html">load_nc</a></span><span class="op">(</span><span class="st">"cats_test_raw"</span><span class="op">)</span> <span class="co"># no .nc required this way!</span></span></code></pre></div>
<p>All right! Whichever way you have just run
<code>MN &lt;- load_nc(...)</code>, this creates an animaltag list
object <code>MN</code> in your workspace. You can view it in the
Environment tab if working in RStudio.</p>
<p><img src="MN_in_environment.png" width="485"></p>
<p>Or in the command line/console, type:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">MN</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">A</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_struct">
Show/Hide Results
</button>
<div id="MN_struct" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "First the results for names(MN):"</span></span>
<span><span class="co">#&gt; [1] "--------------------------------------------"</span></span>
<span><span class="co">#&gt; [1] "A"    "M"    "G"    "LL"   "P"    "info"</span></span>
<span><span class="co">#&gt; [1] "Then the results for str(MN, max.level = 1):"</span></span>
<span><span class="co">#&gt; [1] "--------------------------------------------"</span></span>
<span><span class="co">#&gt; List of 6</span></span>
<span><span class="co">#&gt;  $ A   :List of 19</span></span>
<span><span class="co">#&gt;  $ M   :List of 19</span></span>
<span><span class="co">#&gt;  $ G   :List of 19</span></span>
<span><span class="co">#&gt;  $ LL  :List of 19</span></span>
<span><span class="co">#&gt;  $ P   :List of 19</span></span>
<span><span class="co">#&gt;  $ info:List of 11</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "animaltag" "list"</span></span>
<span><span class="co">#&gt; [1] "and finally the results for str(MN$A):"</span></span>
<span><span class="co">#&gt; [1] "--------------------------------------------"</span></span>
<span><span class="co">#&gt; List of 19</span></span>
<span><span class="co">#&gt;  $ data              : num [1:720000, 1:3] -2.42 -2.4 -2.35 -2.3 -2.2 ...</span></span>
<span><span class="co">#&gt;  $ sampling          : chr "regular"</span></span>
<span><span class="co">#&gt;  $ sampling_rate     : num 400</span></span>
<span><span class="co">#&gt;  $ sampling_rate_unit: chr "Hz"</span></span>
<span><span class="co">#&gt;  $ depid             : chr "cats_test_raw"</span></span>
<span><span class="co">#&gt;  $ creation_date     : chr "2023-06-14 12:58:08.013504"</span></span>
<span><span class="co">#&gt;  $ history           : chr "read_cats"</span></span>
<span><span class="co">#&gt;  $ type              : chr "A"</span></span>
<span><span class="co">#&gt;  $ full_name         : chr "Acceleration"</span></span>
<span><span class="co">#&gt;  $ description       : chr "triaxial acceleration"</span></span>
<span><span class="co">#&gt;  $ unit              : chr "m/s2"</span></span>
<span><span class="co">#&gt;  $ unit_name         : chr "metres per second squared"</span></span>
<span><span class="co">#&gt;  $ unit_label        : chr "m/s^2"</span></span>
<span><span class="co">#&gt;  $ start_offset      : num 0</span></span>
<span><span class="co">#&gt;  $ start_offset_units: chr "second"</span></span>
<span><span class="co">#&gt;  $ column_name       : chr "x,y,z"</span></span>
<span><span class="co">#&gt;  $ frame             : chr "tag"</span></span>
<span><span class="co">#&gt;  $ axes              : chr "FRU"</span></span>
<span><span class="co">#&gt;  $ files             : chr "20160730-091117-Froback-11-part.csv"</span></span></code></pre>
</div>
<p>You should see that variables Acc, Gyr, Depth, Light, and info are
contained within the list MN.</p>
</div>
</div>
<div class="section level2">
<h2 id="explore-the-test-dataset">Explore the test dataset<a class="anchor" aria-label="anchor" href="#explore-the-test-dataset"></a>
</h2>
<p>Now you can find out what each of the variables is by just typing
their name followed by enter. For example, for info (tag-wide metadata),
run</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MN</span><span class="op">$</span><span class="va">info</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info">
Show/Hide Results
</button>
<div id="MN_info" class="collapse">
<pre><code><span><span class="co">#&gt; $creation_date</span></span>
<span><span class="co">#&gt; [1] "2023-06-14 12:58:11.202458"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $depid</span></span>
<span><span class="co">#&gt; [1] "cats_test_raw"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_source</span></span>
<span><span class="co">#&gt; [1] "20160730-091117-Froback-11-part.csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_nfiles</span></span>
<span><span class="co">#&gt; [1] "1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_format</span></span>
<span><span class="co">#&gt; [1] "csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_make</span></span>
<span><span class="co">#&gt; [1] "CATS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_type</span></span>
<span><span class="co">#&gt; [1] "Archival"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_tzone</span></span>
<span><span class="co">#&gt; [1] "0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_regset</span></span>
<span><span class="co">#&gt; [1] "dd-mm-yyyy HH:MM:SS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_datetime_start</span></span>
<span><span class="co">#&gt; [1] "2016-07-27 16:29:38"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_list</span></span>
<span><span class="co">#&gt; [1] "3 axis Accelerometer,3 axis Magnetometer,3 axis Gyroscope,Temperature,Pressure,Light level,"</span></span></code></pre>
</div>
<p>The <code>info</code> structure tells you where the data came from,
when it was collected, on what animal, and with what type of tag. info
is the general metadata store for a dataset. You can find out what is in
a specific field in info, e.g., to get the
<code>sensors_list</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">sensors_list</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info_sensors_list">
Show/Hide Results
</button>
<div id="MN_info_sensors_list" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "3 axis Accelerometer,3 axis Magnetometer,3 axis Gyroscope,Temperature,Pressure,Light level,"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="updating-and-adding-metadata">Updating and adding metadata<a class="anchor" aria-label="anchor" href="#updating-and-adding-metadata"></a>
</h3>
<p>There is a lot of metadata missing from this file!
<code><a href="../reference/read_cats.html">read_cats()</a></code> can only auto-fill it with information that is
standard for all CATS tags, or contained in the file itself. Other
metadata must be added by the user.</p>
<p>For example, to add a field called ‘data_owner’ with value ‘Jeremy
Goldbogen, Dave Cade’, you would enter:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">data_owner</span> <span class="op">&lt;-</span> <span class="st">'Jeremy Goldbogen, Dave Cade'</span></span>
<span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">data_owner</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info_data_owner">
Show/Hide Results
</button>
<div id="MN_info_data_owner" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "Jeremy Goldbogen, Dave Cade"</span></span></code></pre>
</div>
<p>This is a way to add metadata to a dataset before sending it off to
an archive (e.g., a dataset to accompany a journal paper). Although
there are no rules for what you call each field, we are working toward
establishing a set of best practices.</p>
<p>Entering metadata by hand by typing it into the R console is tedious,
and also a recipe for inconsistencies. (Let’s avoid that!) To that end,
we have tried to provide a couple of other options, considered
below.</p>
</div>
<div class="section level3">
<h3 id="saving-metadata-with-make_info">Saving Metadata with make_info<a class="anchor" aria-label="anchor" href="#saving-metadata-with-make_info"></a>
</h3>
<p>You can use <code><a href="../reference/make_info.html">make_info()</a></code> to create a metadata info
structure with information about the researcher, tag type, and study
species. This function allows the user to generate a “skeleton” info
structure for a tag deployment, with some common pieces of metadata
filled in. Additional information can then be added manually or using a
custom script before saving this info as part of a netCDF (.nc)
file.</p>
<p>For example,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">more_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_info.html">make_info</a></span><span class="op">(</span>depid <span class="op">=</span> <span class="st">'cats_test'</span>, tagtype <span class="op">=</span> <span class="st">'CATS'</span>, </span>
<span>                       species <span class="op">=</span> <span class="st">'mn'</span>, owner <span class="op">=</span> <span class="st">'jg'</span><span class="op">)</span></span>
<span><span class="co"># results a few chunks later</span></span></code></pre></div>
<p>Note that you may need to add researchers, species, and perhaps tag
types to the template files. To find out where these are stored on your
machine, you can run:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'researchers.csv'</span>, package<span class="op">=</span><span class="st">'tagtools'</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#system_file_researchers">
Show/Hide Results
</button>
<div id="system_file_researchers" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "C:/Users/wyq/AppData/Local/Temp/Rtmpu46kIj/temp_libpath397c6fb96e4a/tagtools/extdata/researchers.csv"</span></span></code></pre>
</div>
<p>Then, navigate to the folder and make any edits that you would like.
You may need to restart R before they will take effect.</p>
<p>Once you have succeeded in running <code><a href="../reference/make_info.html">make_info()</a></code>, you can
view the results:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">more_info</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#more_info">
Show/Hide Results
</button>
<div id="more_info" class="collapse">
<pre><code><span><span class="co">#&gt; $animal_dbase_url</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_id</span></span>
<span><span class="co">#&gt; [1] "Unknown"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_species_common</span></span>
<span><span class="co">#&gt; [1] "Humpback whale"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_species_science</span></span>
<span><span class="co">#&gt; [1] "Megaptera novaeangliae"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_datetime_start</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_locality</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_location_lat</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_location_lon</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_method</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_datetime_start</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_regset</span></span>
<span><span class="co">#&gt; [1] "dd/mm/yyyy HH:MM:SS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_tzone</span></span>
<span><span class="co">#&gt; [1] "0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $depid</span></span>
<span><span class="co">#&gt; [1] "cats_test"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_make</span></span>
<span><span class="co">#&gt; [1] "CATS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_model</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_serial</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_type</span></span>
<span><span class="co">#&gt; [1] "Archival"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_url</span></span>
<span><span class="co">#&gt; [1] "http://www.cats.is/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_datetime_made</span></span>
<span><span class="co">#&gt; [1] "2023-07-10 15:05:03"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_format</span></span>
<span><span class="co">#&gt; [1] ".csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_nfiles</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_source</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_datetime_end</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_datetime_start</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_name</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_cite</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_details</span></span>
<span><span class="co">#&gt; [1] "Stanford University"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_doi</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_email</span></span>
<span><span class="co">#&gt; [1] "jergold@stanford.edu"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_license</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_name</span></span>
<span><span class="co">#&gt; [1] "Jeremy Goldbogen"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_firm</span></span>
<span><span class="co">#&gt; [1] "Not specified"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_list</span></span>
<span><span class="co">#&gt; [1] "3axis Accelerometer,3 axis Magnetometer,3 axis Gyroscope,Pressure,Light,GPS,Video"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_soft</span></span>
<span><span class="co">#&gt; [1] "Not specified"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="combining-info-and-more_info">Combining info and more_info<a class="anchor" aria-label="anchor" href="#combining-info-and-more_info"></a>
</h3>
<p>Now we have two different info structures—the one we just created
with <code><a href="../reference/make_info.html">make_info()</a></code> and the one we got when we created the .nc
file using <code><a href="../reference/read_cats.html">read_cats()</a></code>.</p>
<p>We can combine the two together, keeping the fields from the original
info if there are any duplicates:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">more_info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span></span>
<span><span class="va">MN</span><span class="op">$</span><span class="va">info</span> <span class="op">&lt;-</span> <span class="va">more_info</span></span>
<span><span class="va">MN</span><span class="op">$</span><span class="va">info</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#more_info2">
Show/Hide Results
</button>
<div id="more_info2" class="collapse">
<pre><code><span><span class="co">#&gt; $animal_dbase_url</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_id</span></span>
<span><span class="co">#&gt; [1] "Unknown"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_species_common</span></span>
<span><span class="co">#&gt; [1] "Humpback whale"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $animal_species_science</span></span>
<span><span class="co">#&gt; [1] "Megaptera novaeangliae"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_datetime_start</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_locality</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_location_lat</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_location_lon</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_deploy_method</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_datetime_start</span></span>
<span><span class="co">#&gt; [1] "2016-07-27 16:29:38"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_regset</span></span>
<span><span class="co">#&gt; [1] "dd-mm-yyyy HH:MM:SS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dephist_device_tzone</span></span>
<span><span class="co">#&gt; [1] "0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $depid</span></span>
<span><span class="co">#&gt; [1] "cats_test_raw"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_make</span></span>
<span><span class="co">#&gt; [1] "CATS"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_model</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_serial</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_type</span></span>
<span><span class="co">#&gt; [1] "Archival"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $device_url</span></span>
<span><span class="co">#&gt; [1] "http://www.cats.is/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_datetime_made</span></span>
<span><span class="co">#&gt; [1] "2023-07-10 15:05:03"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_format</span></span>
<span><span class="co">#&gt; [1] ".csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_nfiles</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dtype_source</span></span>
<span><span class="co">#&gt; [1] "UNKNOWN"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_datetime_end</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_datetime_start</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $project_name</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_cite</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_details</span></span>
<span><span class="co">#&gt; [1] "Stanford University"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_doi</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_email</span></span>
<span><span class="co">#&gt; [1] "jergold@stanford.edu"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_license</span></span>
<span><span class="co">#&gt; [1] "Contact data provider"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $provider_name</span></span>
<span><span class="co">#&gt; [1] "Jeremy Goldbogen"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_firm</span></span>
<span><span class="co">#&gt; [1] "Not specified"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_list</span></span>
<span><span class="co">#&gt; [1] "3 axis Accelerometer,3 axis Magnetometer,3 axis Gyroscope,Temperature,Pressure,Light level,"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sensors_soft</span></span>
<span><span class="co">#&gt; [1] "Not specified"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $creation_date</span></span>
<span><span class="co">#&gt; [1] "2023-06-14 12:58:11.202458"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_source</span></span>
<span><span class="co">#&gt; [1] "20160730-091117-Froback-11-part.csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_nfiles</span></span>
<span><span class="co">#&gt; [1] "1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_format</span></span>
<span><span class="co">#&gt; [1] "csv"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $data_owner</span></span>
<span><span class="co">#&gt; [1] "Jeremy Goldbogen, Dave Cade"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="saving-metadata-with-a-gui-editor">Saving metadata with a GUI editor<a class="anchor" aria-label="anchor" href="#saving-metadata-with-a-gui-editor"></a>
</h3>
<p>Another option for entering user-generated metadata is to use the
animaltags metadata editor. This interface allows you to type your
information into pre-named fields, allowing you to fully customize the
information while also using standard field names.</p>
<p>To launch the editor, run:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/metadata_editor.html">metadata_editor</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>A web browser window will open in which you can fill in metadata
fields for your tag.</p>
<p><img src="meta_editor.png" width="630"></p>
<p>Depending on your individual platform, this editor may not have any
of the tabs open. Simply click on one of the tabs (Device Information,
Tag and Animal Information, etc.) to open it.</p>
<p>Perhaps you don’t currently have metadata on hand to fill in the
fields yourself. Or, at some point you might already have metadata
stored in a CSV spreadsheet, <em>in the specific format that this reader
recognizes</em> (it will not magically pick out metadata saved in a CSV
in any order of your choosing). In either case, the function that reads
metadata for you from a <code>.csv</code> file is useful. There should
be a .csv spreadsheet with metadata in your workshop materials that you
can use for now. Upload it with “Browse”, then click “Open from CSV” to
harvest the data. This will automate the data entry process for you.</p>
<p>When you are done, scroll to the bottom of the editor, fill in a file
name under which to save your work, and click “Save”.</p>
<p><em>Note that there are a number of fields which we strongly suggest
filling out…you will get a warning if you try to save with these left
blank.</em> You can choose where on your computer to save this
(temporary) file, and it should confirm what the file name is.</p>
<p>Then, once this file is in your working directory, you can load the
info into R as an animaltags info structure via:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yet_more_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv2struct.html">csv2struct</a></span><span class="op">(</span><span class="st">'the_file_you_just_saved.csv'</span><span class="op">)</span></span>
<span><span class="co"># results not included, will depend on your individual file</span></span></code></pre></div>
<p>And finally, combine it with the rest as before. Try to emulate the
two lines from above, changing the names as needed, without opening the
chunk below. Then check your work against this:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yet_more_info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span></span>
<span><span class="va">MN</span><span class="op">$</span><span class="va">info</span> <span class="op">&lt;-</span> <span class="va">yet_more_info</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="saving-the-data">Saving the data<a class="anchor" aria-label="anchor" href="#saving-the-data"></a>
</h2>
<p>We’ve now made quite a few additions to the metadata in the
<code>info</code> structure, and we probably want to save those to our
.nc file. Here’s how.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="fu"><a href="../reference/add_nc.html">add_nc</a></span><span class="op">(</span><span class="st">'cats_test_raw'</span>, X <span class="op">=</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span>, vname <span class="op">=</span> <span class="st">'info'</span><span class="op">)</span> </span></code></pre></div>
<p>That’s it! If all has worked smoothly, your .nc file will contain all
the additions we’ve been working on.</p>
</div>
<div class="section level2">
<h2 id="review">Review<a class="anchor" aria-label="anchor" href="#review"></a>
</h2>
<p>What have you learned so far? More important steps that will
hopefully, as you’re working with data more frequently, become healthy
routines of consistent, rigorous documentation.</p>
<p>Great work!</p>
<p><em>If you’d like to continue working through these practicals,
<code>vectors-vs-structures</code> and <code>plots-and-cropping</code>
are two good choices.</em></p>
<p><em><code>vectors-vs-structures</code> is a quick review of the way R
stores data in structures, and how these can be extracted to individual
vectors/scalars.</em></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">'vectors-vs-structures'</span>, package <span class="op">=</span> <span class="st">'tagtools'</span><span class="op">)</span></span></code></pre></div>
<p><em>In <code>plots-and-cropping</code>, you’ll get to start
visualizing some data of the types you’ve been learning to
load.</em></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">'plots-and-cropping'</span>, package <span class="op">=</span> <span class="st">'tagtools'</span><span class="op">)</span></span></code></pre></div>
<hr>
<p>Animaltags home pages: <a href="http://animaltags.org/" class="external-link uri">http://animaltags.org/</a> (old), <a href="https://animaltags.netlify.app/" class="external-link uri">https://animaltags.netlify.app/</a> (new), <a href="https://github.com/stacyderuiter/TagTools" class="external-link uri">https://github.com/stacyderuiter/TagTools</a> (for latest
beta source code), <a href="https://stacyderuiter.github.io/TagTools/articles/TagTools" class="external-link uri">https://stacyderuiter.github.io/TagTools/articles/TagTools</a>
(vignettes overview)</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stacy DeRuiter, Mark Johnson, David Sweeney, Ye Joo McNamara-Oh, Samuel Fynewever, (Oghenkevwe) Racheal Tejevbo, Tiago Marques, Yuqian Wang, (Oghenesuvwe) Su Ogedegbe.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
