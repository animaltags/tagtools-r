<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tagtools">
<title>Jerk: a way to emphasize rapid changes in acceleration • tagtools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Jerk: a way to emphasize rapid changes in acceleration">
<meta property="og:description" content="tagtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tagtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Detectors.html">Detectors</a>
    <a class="dropdown-item" href="../articles/TagTools.html">Tagtools vignettes: overview and introduction</a>
    <a class="dropdown-item" href="../articles/acceleration-filtering.html">Complementary filtering for acceleration: low- &amp; high-frequency</a>
    <a class="dropdown-item" href="../articles/data-quality-error-correction.html">Data quality &amp; error correction</a>
    <a class="dropdown-item" href="../articles/detectors-draft.html">detectors draft</a>
    <a class="dropdown-item" href="../articles/dive-stats.html">Using dive_stats</a>
    <a class="dropdown-item" href="../articles/find-dives.html">Using find_dives</a>
    <a class="dropdown-item" href="../articles/fine-scale-tracking.html">Fine-scale tracking</a>
    <a class="dropdown-item" href="../articles/install-load-tagtools.html">Installing and loading tagtools</a>
    <a class="dropdown-item" href="../articles/jerk-transients.html">Jerk: a way to emphasize rapid changes in acceleration</a>
    <a class="dropdown-item" href="../articles/load-tag-data.html">Load tag data</a>
    <a class="dropdown-item" href="../articles/magnetometer-filtering.html">More complementary filtering: magnetometer &amp; dynamic acceleration</a>
    <a class="dropdown-item" href="../articles/mahalanobis-distance.html">Mahalanobis distance</a>
    <a class="dropdown-item" href="../articles/plots-and-cropping.html">Plots and cropping</a>
    <a class="dropdown-item" href="../articles/rotation-test.html">Rotation test</a>
    <a class="dropdown-item" href="../articles/tag-to-whale-frame.html">Tag orientation: From tag frame to sperm whale frame</a>
    <a class="dropdown-item" href="../articles/vectors-vs-structures.html">Vectors and scalars versus structures</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Jerk: a way to emphasize rapid changes in acceleration</h1>
                        <h4 data-toc-skip class="author">tagtools
project team</h4>
            
            <h4 data-toc-skip class="date">2023-05-04</h4>
      
      
      <div class="d-none name"><code>jerk-transients.Rmd</code></div>
    </div>

    
    
<p>Welcome to the jerk-transients vignette! Thanks for getting some time
to know our package. We hope it’s, thus far, all you’ve dreamed it would
be.</p>
<p>In this vignette, you will use jerk to identify prey capture
attempts.</p>
<p><em>Estimated time for this vignette: 20 minutes.</em></p>
<p>These practicals all assume that you have R/Rstudio installed on your
machine, some basic experience working with them, and can execute
provided code, making some user-specific changes along the way (e.g. to
help R find a file you downloaded). We will provide you with quite a few
lines. To boost your own learning, you would do well to try and write
them before opening what we give, using this just to check your
work.</p>
<p>Additionally, be careful when copy-pasting special characters such as
_underscores_ and ‘quotes’. If you get an error, one thing to check is
that you have just a single, simple underscore, and
<code>'straight quotes'</code>, whether <code>'single'</code> or
<code>"double"</code> (rather than “smart quotes”).</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>If you’ve finished <code>complementary-filtering</code> within the
same R session, skip to <a href="#acceleration-transients-jerk-and-dynamic-acceleration">Acceleration
transients, jerk and dynamic acceleration</a>. If not, you’ll want to do
this first section.</p>
<p>For this practical we will use data from a suction cup tag attached
to the back of a beaked whale. This dataset is built into the
<code>tagtools</code> package, so you can access it using
<code>system.file</code>.</p>
<p>Write <code>testset1.nc</code> to the object <code>bw</code>, for
“beaked whale”. Then use <code><a href="../reference/plott.html">plott()</a></code> to get a look at it.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">tagtools</span><span class="op">)</span></span>
<span><span class="va">bw_file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"testset1.nc"</span>, package <span class="op">=</span> <span class="st">'tagtools'</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">bw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_nc.html">load_nc</a></span><span class="op">(</span><span class="va">bw_file_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plott.html">plott</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Depth <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">P</span>, Acc <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">A</span>, Mag <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">M</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#plott_bw">
Show/Hide Results
</button>
<div id="plott_bw" class="collapse">
<p><img src="jerk-transients_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<p>This dataset contains a deep dive followed by a shallow dive. We want
to infer the function of these by looking for locomotion effort and
sudden changes in acceleration that could be indicative of prey capture
attempts. We are also going to look for changes in swimming gait.</p>
</div>
<div class="section level2">
<h2 id="acceleration-transients-jerk-and-dynamic-acceleration">Acceleration transients, jerk and dynamic acceleration<a class="anchor" aria-label="anchor" href="#acceleration-transients-jerk-and-dynamic-acceleration"></a>
</h2>
<p>We want to look for indications of foraging during the two dives.
Sudden changes (transients) in acceleration are often associated with
prey capture attempts. One way to emphasise rapid changes in
acceleration is by differentiating it to produce the jerk.</p>
<p>This is effectively high-pass filtering acceleration with a
constantly-sloping filter—the higher the frequency, the more it is
emphasised. Because we don’t know what kind of movement is involved in a
prey capture attempt, we don’t know which axis of acceleration will be
most relevant. It is safer then to just compute the magnitude of the
jerk in all three axes to get a single vector (also called “norm-jerk”).
That way, a peak in any or all axes will show up. <code>njerk</code>
computes this from acceleration. Try running <code>njerk</code> on our
acceleration data (where is it stored?) and writing the result to
<code>J</code>. Then, once you also grab the sampling rate, you can plot
this jerk data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/njerk.html">njerk</a></span><span class="op">(</span><span class="va">bw</span><span class="op">$</span><span class="va">A</span><span class="op">)</span></span>
<span><span class="va">fs</span> <span class="op">&lt;-</span> <span class="va">bw</span><span class="op">$</span><span class="va">A</span><span class="op">$</span><span class="va">sampling_rate</span></span>
<span><span class="fu"><a href="../reference/plott.html">plott</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Depth <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">P</span><span class="op">$</span><span class="va">data</span>, Jerk <span class="op">=</span> <span class="va">J</span><span class="op">)</span>, fsx <span class="op">=</span> <span class="va">fs</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#plott_J">
Show/Hide Results
</button>
<div id="plott_J" class="collapse">
<p><img src="jerk-transients_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<p>Where in the dive profile do the largest jerk transients (peaks)
appear?</p>
<button class="btn btn-primary" data-toggle="collapse" data-target="#ans_foraging_shallow_dive">
<em>Show/Hide Answers</em>
</button>
<div id="ans_foraging_shallow_dive" class="collapse">
<p><em>The largest jerk transients appear mostly at the bottom of the
deeper dive.</em></p>
</div>
<p>Check out some of the biggest peaks to see how short they are.</p>
<div class="section level3">
<h3 id="effects-of-sampling-rate-on-jerk">Effects of Sampling Rate on jerk<a class="anchor" aria-label="anchor" href="#effects-of-sampling-rate-on-jerk"></a>
</h3>
<p>The size and clarity of the jerk peaks depends on the sampling rate.
We are using 25 Hz data. To see what you would get with 5 Hz data, try
decimating the acceleration before computing the jerk:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">bw</span><span class="op">$</span><span class="va">A</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># look at the data before decimation</span></span>
<span><span class="va">Ad</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decdc.html">decdc</a></span><span class="op">(</span><span class="va">bw</span><span class="op">$</span><span class="va">A</span>, <span class="fl">5</span><span class="op">)</span> <span class="co"># decimate by 5 times. New sampling rate is 25/5 Hz</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Ad</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># and after decimation</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#Ad">
Show/Hide Results
</button>
<div id="Ad" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "results for str(bw$A, max.level = 1)"</span></span>
<span><span class="co">#&gt; [1] "------------------------------------"</span></span>
<span><span class="co">#&gt; List of 18</span></span>
<span><span class="co">#&gt;  $ data              : num [1:137976, 1:3] -1.85 -1.78 -1.73 -1.7 -1.64 ...</span></span>
<span><span class="co">#&gt;  $ sampling          : chr "regular"</span></span>
<span><span class="co">#&gt;  $ sampling_rate     : num 25</span></span>
<span><span class="co">#&gt;  $ sampling_rate_unit: chr "Hz"</span></span>
<span><span class="co">#&gt;  $ depid             : chr "md13_134a"</span></span>
<span><span class="co">#&gt;  $ creation_date     : chr "30-Jul-2017 23:13:50"</span></span>
<span><span class="co">#&gt;  $ history           : chr "sens_struct"</span></span>
<span><span class="co">#&gt;  $ type              : chr "acc"</span></span>
<span><span class="co">#&gt;  $ full_name         : chr "Acceleration"</span></span>
<span><span class="co">#&gt;  $ description       : chr "triaxial acceleration"</span></span>
<span><span class="co">#&gt;  $ unit              : chr "m/s2"</span></span>
<span><span class="co">#&gt;  $ unit_name         : chr "meters per seconds squared"</span></span>
<span><span class="co">#&gt;  $ unit_label        : chr "m/s^2"</span></span>
<span><span class="co">#&gt;  $ start_offset      : num 0</span></span>
<span><span class="co">#&gt;  $ start_offset_units: chr "second"</span></span>
<span><span class="co">#&gt;  $ column_name       : chr "x,y,z"</span></span>
<span><span class="co">#&gt;  $ frame             : chr "animal"</span></span>
<span><span class="co">#&gt;  $ axes              : chr "FRU"</span></span>
<span><span class="co">#&gt; [1] "results for str(Ad, max.level = 1)"</span></span>
<span><span class="co">#&gt; [1] "------------------------------------"</span></span>
<span><span class="co">#&gt; List of 18</span></span>
<span><span class="co">#&gt;  $ data              : num [1:27595, 1:3] -1.797 -1.484 -0.966 -0.28 0.339 ...</span></span>
<span><span class="co">#&gt;  $ sampling          : chr "regular"</span></span>
<span><span class="co">#&gt;  $ sampling_rate     : num 5</span></span>
<span><span class="co">#&gt;  $ sampling_rate_unit: chr "Hz"</span></span>
<span><span class="co">#&gt;  $ depid             : chr "md13_134a"</span></span>
<span><span class="co">#&gt;  $ creation_date     : chr "30-Jul-2017 23:13:50"</span></span>
<span><span class="co">#&gt;  $ history           : chr "decdc(5)"</span></span>
<span><span class="co">#&gt;  $ type              : chr "acc"</span></span>
<span><span class="co">#&gt;  $ full_name         : chr "Acceleration"</span></span>
<span><span class="co">#&gt;  $ description       : chr "triaxial acceleration"</span></span>
<span><span class="co">#&gt;  $ unit              : chr "m/s2"</span></span>
<span><span class="co">#&gt;  $ unit_name         : chr "meters per seconds squared"</span></span>
<span><span class="co">#&gt;  $ unit_label        : chr "m/s^2"</span></span>
<span><span class="co">#&gt;  $ start_offset      : num 0</span></span>
<span><span class="co">#&gt;  $ start_offset_units: chr "second"</span></span>
<span><span class="co">#&gt;  $ column_name       : chr "x,y,z"</span></span>
<span><span class="co">#&gt;  $ frame             : chr "animal"</span></span>
<span><span class="co">#&gt;  $ axes              : chr "FRU"</span></span></code></pre>
</div>
<p>Compute the decimated jerk from the decimated acceleration, and plot
it with the jerk computed from the full bandwidth acceleration:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Jd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/njerk.html">njerk</a></span><span class="op">(</span><span class="va">Ad</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plott.html">plott</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Depth <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">P</span><span class="op">$</span><span class="va">data</span>, `25 Hz Jerk` <span class="op">=</span> <span class="va">J</span>, `5Hz Jerk` <span class="op">=</span> <span class="va">Jd</span><span class="op">)</span>,</span>
<span>      fsx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">fs</span>, <span class="va">fs</span>, <span class="va">fs</span><span class="op">/</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#plot_jd">
Show/Hide Results
</button>
<div id="plot_jd" class="collapse">
<p><img src="jerk-transients_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<p>Check out some of the obvious peaks around minute 20 to minute 30 to
have a look at the ‘signal-to-noise’ in the jerk transients. How clear
are the jerk transients in the decimated signal compared to the original
data rate? What does this tell you about the frequency content in the
transients?</p>
<button class="btn btn-primary" data-toggle="collapse" data-target="#ans_freq_content_in_transients">
<em>Show/Hide Answers</em>
</button>
<div id="ans_foraging_shallow_dive" class="collapse">
<p><em>The jerk transients are definitely less clear in the decimated
signal compared to the original data rate. Consider the peak near 0.75
hours in the original (</em>25 Hz<em>)signal: there is no corresponding
peak near 0.75 hours in the decimated signal. Similarly, consider the
two peaks near 1.5 hours in the original. Though the jerk is higher
around this area in the decimated signal, the peaks are quite unclear.
This tells us that it is important to have high-resolution data—since
the acceleration is changing so quickly, it is possible to stop
observing for just 0.2 seconds (as is true of</em> 5 Hz <em>data), and
miss an important event.</em></p>
<p><em>Put concisely, the jerk signal has a lot of high frequency
content.</em></p>
</div>
</div>
<div class="section level3">
<h3 id="detecting-jerk-peaks">Detecting Jerk Peaks<a class="anchor" aria-label="anchor" href="#detecting-jerk-peaks"></a>
</h3>
<p>To find potential prey capture attempts, we need to run a detector on
the norm-jerk signal. Although it is easy to see peaks by eye in the
data, detectors require some information to do a good job: they need to
know the threshold above which a peak is really a peak and the blanking
time, i.e., the minimum time that must elapse after a detection before
another detection can happen.</p>
<p>The tagtools includes interactive peak detectors that allow you to
choose a threshold and see the effect this has on which transients are
detected. We will use a blanking time of 5s, i.e., we expect that the
shortest time between prey captures is 5s:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_peaks.html">detect_peaks</a></span><span class="op">(</span><span class="va">J</span>, <span class="va">fs</span>, bktime <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>  <span class="co"># 5s blanking time, threshold is interactive</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#detect_peaks">
Show/Hide Results
</button>
<div id="detect_peaks" class="collapse">
<pre><code><span><span class="co">#&gt; [1] "GRAPH HELP:"</span></span>
<span><span class="co">#&gt; [1] "For changing only the thresh level, click once within the plot and then push enter"</span></span>
<span><span class="co">#&gt; [1] " to specify the y-value at which your new thresh level will be."</span></span>
<span><span class="co">#&gt; [1] "For changing just the bktime value, click twice within the plot and then push enter"</span></span>
<span><span class="co">#&gt; [1] " to specify the length for which your bktime will be."</span></span>
<span><span class="co">#&gt; [1] "To change both the bktime and the thresh, click three times within the plot:"</span></span>
<span><span class="co">#&gt; [1] " the first click will change the thresh level,"</span></span>
<span><span class="co">#&gt; [1] " the second and third clicks will change the bktime."</span></span>
<span><span class="co">#&gt; [1] "To return your results without changing the thresh and bktime from their default"</span></span>
<span><span class="co">#&gt; [1] " values, simply push enter."</span></span></code></pre>
<p><img src="jerk-transients_files/figure-html/unnamed-chunk-10-1.png" width="700"><img src="jerk-transients_files/figure-html/unnamed-chunk-10-2.png" width="700"></p>
</div>
<p>Follow the instructions in the console to change the threshold. You
need to pick a threshold that excludes most of the jerk transients
during the strong propulsion locomotion in the ascent but that still
detects most of the jerk transients during the bottom part of the deep
dive. (Balancing false detections and missed detections is often not
easy in a detector and is a matter of finding a trade-off that works for
your application.) In the figure given, we’ve set the threshold to
100.</p>
<p>This function returns a list of information about the detected peaks.
For each detection, the start and end times are reported (in seconds),
along with the time at which the peak occurred and the height of the
peak. Finally, the selected threshold and blanking time are reported.
You can plot the height and time of each detection along with the dive
profile as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plott.html">plott</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Depth <span class="op">=</span> <span class="va">bw</span><span class="op">$</span><span class="va">P</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># note: the code below assumes your plott x-axis is in hours.</span></span>
<span><span class="co"># if it were in minutes use /60 instead of /3600, etc.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">pks</span><span class="op">$</span><span class="va">peak_time</span><span class="op">/</span><span class="va">fs</span><span class="op">/</span><span class="fl">3600</span>, <span class="va">bw</span><span class="op">$</span><span class="va">P</span><span class="op">$</span><span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">pks</span><span class="op">$</span><span class="va">peak_time</span><span class="op">)</span><span class="op">]</span>, pch <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#plot_peaks">
Show/Hide Results
</button>
<div id="plot_peaks" class="collapse">
<p><img src="jerk-transients_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<p>Bearing in mind that some of the jerk peaks might come from strong
locomotory strokes, is there strong evidence for foraging in the deep
dive? Is there strong evidence for foraging in the shallow dive?</p>
<button class="btn btn-primary" data-toggle="collapse" data-target="#ans_foraging_shallow_dive">
<em>Show/Hide Answers</em>
</button>
<div id="ans_foraging_shallow_dive" class="collapse">
<p><em>Yes, there is strong evidence for foraging in the deep dive,
since with all the jerk peaks present there, there are likely some
strong locomotory strokes in it. These strong locomotory strokes are, in
turn, evidence of foraging. However, there is almost no evidence for
foraging in the shallow dive, since there are no jerk peaks
there.</em></p>
</div>
<p>Now, if you have done <code>complementary-filtering</code> recently,
here is one more question for you. Adding your inference from
<code>complementary-filtering</code> about locomotion in the shallow
dive, what can you conclude about the general behaviour of the animal in
the shallow dive? Namely, is it resting, traveling or foraging? Write
down your marvelous thoughts.</p>
<button class="btn btn-primary" data-toggle="collapse" data-target="#ans_behav_shallow_dive">
<em>Show/Hide Answers</em>
</button>
<div id="ans_behav_shallow_dive" class="collapse">
<p><em>We know now that the whale is likely not foraging in the shallow
dive, since the sudden movements (jerk peaks) are happening only in the
earlier dive. Additionally, though the animal is not accelerating
quickly (striking/flinching), it is still moving (locomotion). So it
seems more likely to be traveling than resting. </em></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="review">Review<a class="anchor" aria-label="anchor" href="#review"></a>
</h2>
<p>You’ve learned how to accentuate quick movements of an animal using
jerk, and used the accentuated picture to gain understanding about the
animal’s behaviour.</p>
<p>And with that, congrats! You bounced through this vignette.</p>
<p><em>If you’d like to continue working through these vignettes,
<code>acceleration-filtering</code> and
<code>magnetometer-filtering</code> are very logical choices. You’ll
gain more insight into the same dataset, and other ways of analysing
locomotion, by doing these.</em></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">'acceleration-filtering'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">'magnetometer-filtering'</span><span class="op">)</span></span></code></pre></div>
<hr>
<p>Animaltags home pages: <a href="http://animaltags.org/" class="external-link uri">http://animaltags.org/</a> (old), <a href="https://animaltags.netlify.app/" class="external-link uri">https://animaltags.netlify.app/</a> (new), <a href="https://github.com/stacyderuiter/TagTools" class="external-link uri">https://github.com/stacyderuiter/TagTools</a> (for latest
beta source code), <a href="https://stacyderuiter.github.io/TagTools/articles/TagTools" class="external-link uri">https://stacyderuiter.github.io/TagTools/articles/TagTools</a>
(vignettes overview)</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stacy DeRuiter, Mark Johnson, David Sweeney, Ye Joo McNamara-Oh, Samuel Fynewever, (Oghenkevwe) Racheal Tejevbo, Tiago Marques.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
